"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{8884:function(e,t,r){var n=r(5318),s=r(862);t.Z=void 0;var a=s(r(7294)),c=(0,n(r(2108)).default)(a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=c},3212:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(5861),s=r(885),a=r(7757),c=r.n(a),o=r(1125),l=r(3099),i=r(9814),u=r(5833),d=r(9669),m=r.n(d),f=r(4184),p=r.n(f),h=r(1163),b=r(7294),x=r(4304),v=r(5893);function j(e){var t=e.position,r=void 0===t?"up":t,a=e.className,d=(0,x.OT)(),f=(0,s.Z)(d,3),j=f[0],g=f[1],y=f[2],w=(0,h.useRouter)(),N=(0,b.useRef)(null);(0,x.t$)(N,(function(){return y(!1)}));var O=function(){var e=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().post("/api/auth/logout");case 3:e.sent,w.push("/login"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=p()("absolute card right-0 transform shadow-lg",{"-translate-y-3 bottom-full":"up"===r},{"translate-y-3 top-full":"down"===r},a);return(0,v.jsxs)("button",{onClick:g,className:"relative rounded-btn",ref:N,children:[j?(0,v.jsx)(o.Z,{}):(0,v.jsx)(l.Z,{}),j&&(0,v.jsx)("div",{className:Z,children:(0,v.jsxs)("ul",{tabIndex:0,className:"p-2 !pl-2 menu bg-base-100/70 rounded-box w-52 space-y-2",children:[(0,v.jsx)("li",{className:"w-full",children:(0,v.jsxs)("a",{className:"space-x-3",onClick:function(){return w.push("/profile")},children:[(0,v.jsx)(i.Z,{})," ",(0,v.jsx)("span",{children:"Profile"})]})}),(0,v.jsx)("hr",{className:"border-base-200"}),(0,v.jsx)("li",{className:"w-full text-red-400",children:(0,v.jsxs)("a",{className:"space-x-3",onClick:O,children:[(0,v.jsx)(u.Z,{})," ",(0,v.jsx)("span",{children:"Logout"})]})})]})})]})}},8324:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(4942),s=r(5987),a=r(4184),c=r.n(a),o=(r(7294),r(5893)),l=["left","right","label","error","className"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){var t=e.left,r=e.right,n=e.label,a=e.error,i=e.className,d=void 0===i?"":i,m=(0,s.Z)(e,l),f=c()("w-full h-full px-4 rounded-btn bg-transparent",{"rounded-l-none pl-0":t,"rounded-r-none pr-0":r});return(0,o.jsxs)("div",{className:"w-full form-control",children:[n&&(0,o.jsx)("label",{className:"label",htmlFor:n,children:(0,o.jsx)("span",{className:"label-text",children:n})}),(0,o.jsxs)("div",{className:c()("flex px-0 input",d),children:[t&&(0,o.jsx)("div",{className:"flex items-center bg-transparent",children:t}),(0,o.jsx)("input",u({id:m.id||n||m.name,className:f},m)),r&&(0,o.jsx)("div",{className:"flex items-center bg-transparent",children:r})]}),a&&(0,o.jsx)("small",{className:"label",children:(0,o.jsx)("span",{className:"text-red-400 label-text-alt",children:a})})]})}},4956:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(6459),s=r(5477),a=r(5893);function c(e){return(0,n.Z)(e),(0,a.jsx)("div",{className:"fixed top-0 left-0 flex items-center justify-center w-screen min-h-screen p-4",children:(0,a.jsx)(s.Z,{classes:{circle:"text-primary"}})})}},811:function(e,t,r){r.d(t,{Qc:function(){return f},Mp:function(){return p},YV:function(){return j},GV:function(){return re.Z},h4:function(){return y},UP:function(){return w.Z},a_:function(){return N.Z},Wn:function(){return L},Zn:function(){return q},ai:function(){return X},RN:function(){return te}});var n=r(4942),s=r(5987),a=r(4184),c=r.n(a),o=r(525),l=r(7294),i=r(5893),u=["left","right","label","error","options","children","onChange","className"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e){var t,r=e.left,n=e.right,a=e.label,d=e.error,f=e.options,p=(e.children,e.onChange),h=e.className,b=void 0===h?"":h,x=(0,s.Z)(e,u),v=(0,l.useRef)(null),j=(0,l.useRef)(null),g=(0,l.useRef)([]),y=(0,l.useRef)(null),w=(0,l.useState)(!1),N=w[0],O=w[1],Z=(0,l.useState)(f),P=Z[0],k=Z[1];(0,o.Z)(v,(function(e){return O(!1)}));var S=c()("w-full h-full px-4 rounded-btn bg-transparent",{"rounded-l-none pl-0":r,"rounded-r-none pr-0":n});return(0,i.jsxs)("div",{className:"relative w-full",ref:v,children:[(0,i.jsx)("label",{className:"block mb-2 text-sm text-gray-800",htmlFor:x.id||a||x.name,children:a}),(0,i.jsxs)("div",{className:c()("flex px-0 input ",b),children:[r&&(0,i.jsx)("div",{className:"flex items-center bg-transparent",children:r}),(0,i.jsx)("input",m({ref:j,className:S,onChange:function(e){O(!0),k(f.filter((function(t){return t.toLowerCase().includes(e.target.value.toLowerCase())}))),p&&p(e)},onKeyDown:function(e){"ArrowDown"===e.key&&g.current[0]&&g.current[0].focus(),"Escape"==e.key&&O(!1)}},x)),n&&(0,i.jsx)("div",{className:"flex items-center bg-transparent",children:n})]}),(null===j||void 0===j||null===(t=j.current)||void 0===t?void 0:t.value)&&N&&P.length>0&&(0,i.jsx)("div",{className:"absolute left-0 z-50 w-full p-2 transform translate-y-2 top-full rounded-btn card bg-base-200",ref:y,children:P.map((function(e,t){return(0,i.jsx)("button",{className:"block w-full px-3 py-1 my-1 text-left border-0 rounded-md btn bg-base-200 hover:bg-base-content-2",onClick:function(){var t,r,n={target:{id:null===(t=j.current)||void 0===t?void 0:t.id,name:null===(r=j.current)||void 0===r?void 0:r.name,value:e}};p&&p(n),O(!1)},onKeyDown:function(e){var r;("ArrowDown"==e.key&&g.current[Math.min(P.length-1,t+1)].focus(),"ArrowUp"==e.key)&&(g.current[Math.max(0,t-1)].focus(),0==t&&(null===j||void 0===j||null===(r=j.current)||void 0===r||r.focus()));"Escape"==e.key&&O(!1)},ref:function(e){g.current[t]=e},children:e},e)}))}),(0,i.jsx)("small",{className:"block mt-1 text-red-500",children:d})]})}function p(e){var t=e.className,r=void 0===t?"":t,n=e.avatar,s=e.text;return(0,i.jsxs)("div",{className:"flex items-center "+r,children:[(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("div",{className:"!flex items-center justify-center w-11 h-11 mr-3 text-lg font-semibold rounded-btn bg-base-200",children:n})}),(0,i.jsx)("p",{className:"block text-lg font-bold",children:s})]})}var h=r(5209),b=(0,h.Z)(l.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),x=r(1679),v=r(1664);function j(e){var t=e.channel,r=(0,x.Z)().user;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"px-5 navbar shadow-navbar min-h-[55px] sm:min-h-16",children:[(0,i.jsx)(v.default,{href:"/",passHref:!0,children:(0,i.jsxs)("a",{className:"block mr-3",children:[(0,i.jsx)(b,{}),(0,i.jsx)("span",{className:"sr-only",children:"Back"})]})}),(0,i.jsx)("h1",{className:"text-lg font-bold",children:"All channels"})]}),(0,i.jsxs)("div",{className:"mb-[55px] sm:mb-16 h-full overflow-y-auto scrollbar-hidden p-5",children:[(0,i.jsx)("h1",{className:"mb-5 text-lg font-bold",children:t.name}),(0,i.jsx)("p",{children:t.description}),(0,i.jsx)("h3",{className:"mt-8 mb-5 text-lg font-bold",children:"Members"}),(0,i.jsx)("div",{className:"space-y-3",children:t.members.map((function(e){return(0,i.jsx)(p,{avatar:(0,i.jsx)("img",{src:e.avatar,alt:"avatar"}),text:e.username,className:"w-full"},e._id)}))})]}),(0,i.jsxs)("div",{className:"absolute bottom-0 left-0 justify-between navbar shadow-navbar-top min-h-[55px] sm:min-h-16 w-full px-5",children:[(0,i.jsx)("div",{className:" avatar",children:(0,i.jsx)("div",{className:"!flex items-center justify-center w-11 h-11 text-sm text-bold rounded-btn bg-base-200",children:(0,i.jsx)("img",{src:null===r||void 0===r?void 0:r.avatar,alt:"user avatar"})})}),(0,i.jsx)("h1",{className:"text-lg font-bold",children:null===r||void 0===r?void 0:r.username}),(0,i.jsx)(re.Z,{})]})]})}var g=r(8884);function y(e){var t=e.title;return(0,i.jsxs)("header",{className:"shadow-navbar navbar min-h-[55px] sm:min-h-16 fixed top-0 right-0 bg-base-100 h-[55px] sm:h-16 w-screen lg:w-[calc(100%-320px)] z-10",children:[(0,i.jsx)("label",{htmlFor:"my-drawer-2",className:"ml-1 mr-3 rounded-full active:bg-base-300/20 lg:hidden",children:(0,i.jsx)(g.Z,{})}),(0,i.jsx)("h1",{className:"text-lg font-bold lg:pl-6",children:t})]})}var w=r(8324),N=r(4956),O=r(5861),Z=r(7757),P=r.n(Z),k=(0,h.Z)(l.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),S=(0,h.Z)(l.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),D=r(9669),E=r.n(D),C=r(2794),R=r(4304);function L(e){var t=e.toggleModal,r=(0,l.useState)(""),n=r[0],s=r[1],a=(0,R.JL)().user,c=(0,R.XR)([]),o=c.array,u=c.set,d=c.push,m=(0,l.useContext)(C.J);return(0,l.useEffect)((function(){return(0,O.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E().get("/api/rooms/");case 3:t=e.sent,u(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),m.connect(),m.on("room added",(function(e){d(e)})),function(){}}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"justify-between navbar shadow-navbar min-h-[55px] sm:min-h-16 w-full px-5",children:[(0,i.jsx)("h1",{className:"text-lg font-bold",children:"Channels"}),(0,i.jsx)("button",{className:"btn btn-sm btn-secondary btn-square ",onClick:t,children:(0,i.jsx)(k,{})})]}),(0,i.jsxs)("div",{className:"mb-[55px] sm:mb-16 h-full overflow-y-auto scrollbar-hidden p-5",children:[(0,i.jsx)(f,{className:"bg-base-200",type:"search",left:(0,i.jsx)(S,{style:{margin:"10px"}}),placeholder:"Search",options:o.flatMap((function(e){return e.name})),value:n,onChange:function(e){return s(e.target.value)}}),(0,i.jsx)("div",{className:"mt-7",children:o.filter((function(e){return e.name.includes(n)})).map((function(e){return(0,i.jsx)(v.default,{href:"/rooms/"+e._id,passHref:!0,children:(0,i.jsx)("a",{className:"block w-full p-1 my-1 hover:bg-base-200/50 rounded-btn",children:(0,i.jsx)(p,{avatar:e.name[0].toUpperCase(),text:e.name})})},e._id)}))})]}),(0,i.jsxs)("div",{className:"absolute bottom-0 left-0 justify-between navbar shadow-navbar-top min-h-[55px] sm:min-h-16 w-full px-5",children:[(0,i.jsx)("div",{className:" avatar",children:(0,i.jsx)("div",{className:"!flex items-center justify-center w-11 h-11 text-sm text-bold rounded-btn bg-base-200",children:(0,i.jsx)("img",{src:null===a||void 0===a?void 0:a.avatar,alt:"user avatar"})})}),(0,i.jsx)("h1",{className:"text-lg font-bold",children:null===a||void 0===a?void 0:a.username}),(0,i.jsx)(re.Z,{})]})]})}var M=r(885),F=r(9544),z=r(5530),T=(0,h.Z)(l.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),_=r(4649);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={message:""};function J(e){var t={};return e.message.length>=300&&(t.message="Message is too long. (Max 300 characters)"),t}function U(e){var t=e.room,r=(0,l.useContext)(C.J),n=(0,_.TA)({initialValues:H({},V),validate:J,onSubmit:function(){var e=(0,O.Z)(P().mark((function e(n,s){var a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setSubmitting(!1),r.connect(),e.prev=2,e.next=5,E().post("/api/messages/",{body:n.message,currentRoomId:null===t||void 0===t?void 0:t._id});case 5:a=e.sent,r.emit("message",{room:null===t||void 0===t?void 0:t._id,message:a.data}),s.resetForm(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r){return e.apply(this,arguments)}}()});return(0,i.jsx)("form",{className:"fixed bottom-0 right-0 flex items-center justify-center w-screen lg:w-[calc(100%-320px)] h-20 px-3 sm:px-10 bg-base-100",onSubmit:n.handleSubmit,autoComplete:"off",children:(0,i.jsx)(w.Z,H({type:"text",placeholder:"Type a message here",className:"bg-base-200",right:(0,i.jsx)("div",{className:"ml-3",children:(0,i.jsxs)("button",{className:"m-1 btn btn-primary btn-square btn-sm",type:"submit",disabled:!n.values.message,children:[(0,i.jsx)(T,{style:{fontSize:15}}),(0,i.jsx)("span",{className:"sr-only",children:"send"})]})}),id:"message",error:n.touched.message&&n.errors.message?n.errors.message:" "},n.getFieldProps("message")))})}function q(e){var t=e.title,r=e.children,n=e.room,s=e.messageForm,a=void 0===s||s,c=(0,z.Z)(!1),o=(0,M.Z)(c,2),l=o[0],u=o[1];return(0,i.jsxs)("div",{className:"min-h-screen drawer drawer-mobile",children:[l&&(0,i.jsx)("div",{className:"fixed top-0 left-0 z-50 grid w-screen h-screen place-items-center bg-transparent/30",children:(0,i.jsx)(te,{closeHandler:u,className:"w-11/12 md:w-[680px]"})}),(0,i.jsx)("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),(0,i.jsxs)("div",{className:"drawer-content",children:[(0,i.jsx)(y,{title:t}),(0,i.jsx)("main",{className:"mt-[55px] sm:mt-16 mb-20 p-3 lg:px-10",children:r}),a&&(0,i.jsx)(U,{room:n})]}),(0,i.jsxs)("div",{className:"drawer-side",children:[(0,i.jsx)("label",{htmlFor:"my-drawer-2",className:"drawer-overlay",children:(0,i.jsx)("div",{className:"!w-10 !h-10 m-2 mr-3 sm:mr-5 btn btn-sm btn-square bg-base-300 hover:bg-base-200 border-base-300 sm:hidden float-right",children:(0,i.jsx)(F.Z,{})})}),(0,i.jsx)("aside",{className:"menu w-[85%] sm:w-[70%] lg:w-80 bg-base-300",children:n?(0,i.jsx)(j,{channel:n}):(0,i.jsx)(L,{toggleModal:u})})]})]})}function I(e){var t=e.className,r=void 0===t?"":t,n=e.message;return(0,i.jsxs)("div",{className:"".concat(r," flex"),children:[(0,i.jsx)("div",{className:"mr-5 avatar",children:(0,i.jsx)("div",{className:"mt-1 w-11 h-11 rounded-btn",children:(0,i.jsx)("img",{src:n.sender.avatar,alt:""})})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"flex items-center text-base-content-2",children:[(0,i.jsx)("span",{className:"text-lg font-bold",children:n.sender.username})," ",(0,i.jsx)("span",{className:"ml-2 text-sm font-medium",children:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),r=new Date(n.createdAt),s=r.toLocaleString("en-US",{hour:"numeric",minute:"numeric"}),a="";return e.getTime()===r.getTime()?(a+="today at ",a+=s):t.getTime()===r.getTime()?(a+="yesterday at ",a+=s):a=r.toLocaleString("en-US",{month:"short",day:"numeric"})+" at "+s,a}()})," "]}),(0,i.jsx)("p",{className:"text-lg font-medium",children:n.body})]})]})}function X(e){var t=e.messages,r=(0,l.useContext)(C.J),n=(0,R.XR)([]),s=n.array,a=n.set,o=(0,R.XR)(t),u=o.array,d=o.push,m=(0,l.useRef)(null),f=(0,R.JL)().user;(0,l.useEffect)((function(){return r.on("message",(function(e){d(e),setTimeout((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),100)})),function(){}}),[]),(0,l.useEffect)((function(){var e={};return u.forEach((function(t){var r=t.createdAt.split("T")[0];r in e?e[r].push(t):e[r]=[t]})),e=Object.keys(e).map((function(t){return{date:t,messages:e[t]}})),setTimeout((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),100),a(e),function(){}}),[u]);return(0,i.jsxs)("div",{className:"flex flex-col w-full mt-5",children:[s.map((function(e){return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)("div",{className:"y-0 after:h-px before:h-px before:bg-base-content-2 after:bg-base-content-2 divider text-base-content-2",children:(t=e.date,new Date(t).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"}))},e.date),(0,i.jsx)("div",{children:e.messages.map((function(e){var t=c()("my-5",{"justify-end":e.sender._id===(null===f||void 0===f?void 0:f._id)});return(0,i.jsx)(I,{message:e,className:t},e._id)}))})]},e.date);var t})),(0,i.jsx)("div",{ref:m})]})}var $=["label","error","className"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=e.label,r=e.error,n=e.className,a=void 0===n?"":n,o=(0,s.Z)(e,$),l=c()("w-full rounded-btn textarea",a);return(0,i.jsxs)("div",{className:"w-full form-control",children:[t&&(0,i.jsx)("label",{className:"label",htmlFor:t,children:(0,i.jsx)("span",{className:"label-text",children:t})}),(0,i.jsx)("textarea",K({id:o.id||t||o.name,className:l},o)),r&&(0,i.jsx)("small",{className:"label",children:(0,i.jsx)("span",{className:"text-red-400 label-text-alt",children:r})})]})}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W={name:"",description:""};function ee(e){var t={};return e.name||(t.name="Required"),e.description?(e.name.length>=50&&(t.description="Name is too long. (Max 50 characters)"),e.description.length>=300&&(t.description="Description is too long. (Max 300 characters)")):t.description="Required",t}function te(e){var t=e.closeHandler,r=e.className,n=(0,l.useRef)(null);(0,R.t$)(n,t);var s=(0,l.useContext)(C.J),a=(0,_.TA)({initialValues:Q({},W),validate:ee,onSubmit:function(){var e=(0,O.Z)(P().mark((function e(r,n){var a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSubmitting(!1),e.prev=1,e.next=4,E().post("/api/rooms",r);case 4:a=e.sent,s.emit("room added",a.data),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.setErrors({name:"Unexpected error please try again."});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()});return(0,i.jsx)("div",{className:"shadow-md card bg-base-300  ".concat(r),ref:n,children:(0,i.jsxs)("form",{className:"pb-3 card-body",onSubmit:a.handleSubmit,autoComplete:"off",children:[(0,i.jsx)("h2",{className:"mb-3 text-lg card-title text-bold md:mb-5",children:"New Channel"}),(0,i.jsxs)("div",{className:"space-y-3 md:space-y-5",children:[(0,i.jsx)(w.Z,Q({type:"text",placeholder:"Channel name",id:"name",error:a.touched.name&&a.errors.name?a.errors.name:" "},a.getFieldProps("name"))),(0,i.jsx)(Y,Q({placeholder:"Channel Description",className:"resize-none",rows:5,id:"description",error:a.touched.description&&a.errors.description?a.errors.description:" "},a.getFieldProps("description")))]}),(0,i.jsxs)("div",{className:"justify-end mt-1 card-actions",children:[(0,i.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Save"}),(0,i.jsx)("button",{className:"btn btn-ghost",onClick:t,children:"Close"})]})]})})}var re=r(3212)},4304:function(e,t,r){r.d(t,{XR:function(){return l},JL:function(){return s.Z},t$:function(){return n.Z},OT:function(){return a.Z}});var n=r(525),s=r(1679),a=r(5530),c=(r(8466),r(2982)),o=r(7294);function l(e){var t=(0,o.useState)(e),r=t[0],n=t[1];return{array:r,set:n,push:function(e){n((function(t){return[].concat((0,c.Z)(t),[e])}))},filter:function(e){n((function(t){return t.filter(e)}))},update:function(e,t){n((function(r){return[].concat((0,c.Z)(r.slice(0,e)),[t],(0,c.Z)(r.slice(e+1,r.length)))}))},remove:function(e){n((function(t){return[].concat((0,c.Z)(t.slice(0,e)),(0,c.Z)(t.slice(e+1,t.length)))}))},clear:function(){n([])}}}},1679:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(5861),s=r(7757),a=r.n(s),c=r(9669),o=r.n(c),l=r(1163),i=r(7294);function u(){var e=(0,i.useState)(!0),t=e[0],r=e[1],s=(0,i.useState)(null),c=s[0],u=s[1],d=(0,l.useRouter)();return(0,i.useEffect)((function(){return(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post("/api/auth/");case 3:t=e.sent,u(t.data),r(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){}}),[]),{user:c,isLoading:t}}},8466:function(e,t,r){var n=r(5861),s=r(4942),a=r(7757),c=r.n(a),o=r(7294);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e,t){var r=(0,o.useRef)({}),s=(0,o.useRef)(!1),a={error:void 0,data:void 0},l=(0,o.useReducer)((function(e,t){switch(t.type){case"loading":return i({},a);case"fetched":return i(i({},a),{},{data:t.payload});case"error":return i(i({},a),{},{error:t.payload});default:return e}}),a),u=l[0],d=l[1];return(0,o.useEffect)((function(){if(e)return function(){var a=(0,n.Z)(c().mark((function n(){var a,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d({type:"loading"}),!r.current[e]){n.next=4;break}return d({type:"fetched",payload:r.current[e]}),n.abrupt("return");case 4:return n.prev=4,n.next=7,fetch(e,t);case 7:if((a=n.sent).ok){n.next=10;break}throw new Error(a.statusText);case 10:return n.next=12,a.json();case 12:if(o=n.sent,r.current[e]=o,!s.current){n.next=16;break}return n.abrupt("return");case 16:d({type:"fetched",payload:o}),n.next=24;break;case 19:if(n.prev=19,n.t0=n.catch(4),!s.current){n.next=23;break}return n.abrupt("return");case 23:d({type:"error",payload:n.t0});case 24:case"end":return n.stop()}}),n,null,[[4,19]])})));return function(){return a.apply(this,arguments)}}()(),function(){s.current=!0}}),[e]),u}},525:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(7294);function s(e,t){(0,n.useEffect)((function(){var r=function(r){var n=null===e||void 0===e?void 0:e.current;n&&!n.contains(r.target)&&t(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[e,t])}},5530:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(7294);function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,n.useState)(e),r=t[0],s=t[1],a=(0,n.useCallback)((function(){return s((function(e){return!e}))}),[]);return[r,a,s]}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{9875:function(e,t,r){"use strict";var n=r(5318),s=r(862);t.Z=void 0;var i=s(r(7294)),a=(0,n(r(2108)).default)(i.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.Z=a},3212:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(5861),s=r(885),i=r(7757),a=r.n(i),o=r(1125),c=r(3099),u=r(9814),d=r(5833),l=r(9669),h=r.n(l),p=r(4184),f=r.n(p),m=r(1163),v=r(7294),g=r(4304),x=r(5893);function w(e){var t=e.position,r=void 0===t?"up":t,i=e.className,l=(0,g.OT)(),p=(0,s.Z)(l,3),w=p[0],y=p[1],b=p[2],j=(0,m.useRouter)(),C=(0,v.useRef)(null);(0,g.t$)(C,(function(){return b(!1)}));var O=function(){var e=(0,n.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h().post("/api/auth/logout");case 3:e.sent,j.push("/login"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=f()("absolute card right-0 transform shadow-lg",{"-translate-y-3 bottom-full":"up"===r},{"translate-y-3 top-full":"down"===r},i);return(0,x.jsxs)("button",{onClick:y,className:"relative rounded-btn",ref:C,children:[w?(0,x.jsx)(o.Z,{}):(0,x.jsx)(c.Z,{}),w&&(0,x.jsx)("div",{className:D,children:(0,x.jsxs)("ul",{tabIndex:0,className:"p-2 !pl-2 menu bg-base-100/70 rounded-box w-52 space-y-2",children:[(0,x.jsx)("li",{className:"w-full",children:(0,x.jsxs)("a",{className:"space-x-3",onClick:function(){return j.push("/profile")},children:[(0,x.jsx)(u.Z,{})," ",(0,x.jsx)("span",{children:"Profile"})]})}),(0,x.jsx)("hr",{className:"border-base-200"}),(0,x.jsx)("li",{className:"w-full text-red-400",children:(0,x.jsxs)("a",{className:"space-x-3",onClick:O,children:[(0,x.jsx)(d.Z,{})," ",(0,x.jsx)("span",{children:"Logout"})]})})]})})]})}},8739:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(5893);function s(e){var t=e.className;return(0,n.jsxs)("div",{className:"".concat(t," justify-between text-sm w-full"),children:[(0,n.jsxs)("span",{children:["created by"," ",(0,n.jsx)("a",{className:"underline",href:"https://devchallenges.io/portfolio/Hussein-Mourad",children:"Hussein-Mourad"})]}),(0,n.jsx)("a",{href:"https://devchallenges.io",children:"devchallenges.io"})]})}},8324:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(4942),s=r(5987),i=r(4184),a=r.n(i),o=(r(7294),r(5893)),c=["left","right","label","error","className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){var t=e.left,r=e.right,n=e.label,i=e.error,u=e.className,l=void 0===u?"":u,h=(0,s.Z)(e,c),p=a()("w-full h-full px-4 rounded-btn bg-transparent",{"rounded-l-none pl-0":t,"rounded-r-none pr-0":r});return(0,o.jsxs)("div",{className:"w-full form-control",children:[n&&(0,o.jsx)("label",{className:"label",htmlFor:n,children:(0,o.jsx)("span",{className:"label-text",children:n})}),(0,o.jsxs)("div",{className:a()("flex px-0 input",l),children:[t&&(0,o.jsx)("div",{className:"flex items-center bg-transparent",children:t}),(0,o.jsx)("input",d({id:h.id||n||h.name,className:p},h)),r&&(0,o.jsx)("div",{className:"flex items-center bg-transparent",children:r})]}),i&&(0,o.jsx)("small",{className:"label",children:(0,o.jsx)("span",{className:"text-red-400 label-text-alt",children:i})})]})}},4956:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(6459),s=r(5477),i=r(5893);function a(e){return(0,n.Z)(e),(0,i.jsx)("div",{className:"fixed top-0 left-0 flex items-center justify-center w-screen min-h-screen p-4",children:(0,i.jsx)(s.Z,{classes:{circle:"text-primary"}})})}},843:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(1664),s=r(3212),i=r(5893);function a(e){var t=e.user;return(0,i.jsx)("header",{children:(0,i.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,i.jsx)(n.default,{href:"/",passHref:!0,children:(0,i.jsx)("img",{src:"/devchallenges-light.svg",alt:"logo"})}),(0,i.jsxs)("div",{className:"flex items-center focus:outline-none",children:[(0,i.jsx)("img",{className:"w-8 h-8 rounded-lg",src:t.avatar,alt:"avatar"}),(0,i.jsx)("span",{className:"ml-2 mr-1",children:t.username}),(0,i.jsx)(s.Z,{position:"down"})]})]})})}},4304:function(e,t,r){"use strict";r.d(t,{XR:function(){return c},JL:function(){return s.Z},t$:function(){return n.Z},OT:function(){return i.Z}});var n=r(525),s=r(1679),i=r(5530),a=(r(8466),r(2982)),o=r(7294);function c(e){var t=(0,o.useState)(e),r=t[0],n=t[1];return{array:r,set:n,push:function(e){n((function(t){return[].concat((0,a.Z)(t),[e])}))},filter:function(e){n((function(t){return t.filter(e)}))},update:function(e,t){n((function(r){return[].concat((0,a.Z)(r.slice(0,e)),[t],(0,a.Z)(r.slice(e+1,r.length)))}))},remove:function(e){n((function(t){return[].concat((0,a.Z)(t.slice(0,e)),(0,a.Z)(t.slice(e+1,t.length)))}))},clear:function(){n([])}}}},1679:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(5861),s=r(7757),i=r.n(s),a=r(9669),o=r.n(a),c=r(1163),u=r(7294);function d(){var e=(0,u.useState)(!0),t=e[0],r=e[1],s=(0,u.useState)(null),a=s[0],d=s[1],l=(0,c.useRouter)();return(0,u.useEffect)((function(){return(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post("/api/auth/");case 3:t=e.sent,d(t.data),r(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){}}),[]),{user:a,isLoading:t}}},8466:function(e,t,r){"use strict";var n=r(5861),s=r(4942),i=r(7757),a=r.n(i),o=r(7294);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e,t){var r=(0,o.useRef)({}),s=(0,o.useRef)(!1),i={error:void 0,data:void 0},c=(0,o.useReducer)((function(e,t){switch(t.type){case"loading":return u({},i);case"fetched":return u(u({},i),{},{data:t.payload});case"error":return u(u({},i),{},{error:t.payload});default:return e}}),i),d=c[0],l=c[1];return(0,o.useEffect)((function(){if(e)return function(){var i=(0,n.Z)(a().mark((function n(){var i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l({type:"loading"}),!r.current[e]){n.next=4;break}return l({type:"fetched",payload:r.current[e]}),n.abrupt("return");case 4:return n.prev=4,n.next=7,fetch(e,t);case 7:if((i=n.sent).ok){n.next=10;break}throw new Error(i.statusText);case 10:return n.next=12,i.json();case 12:if(o=n.sent,r.current[e]=o,!s.current){n.next=16;break}return n.abrupt("return");case 16:l({type:"fetched",payload:o}),n.next=24;break;case 19:if(n.prev=19,n.t0=n.catch(4),!s.current){n.next=23;break}return n.abrupt("return");case 23:l({type:"error",payload:n.t0});case 24:case"end":return n.stop()}}),n,null,[[4,19]])})));return function(){return i.apply(this,arguments)}}()(),function(){s.current=!0}}),[e]),d}},525:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7294);function s(e,t){(0,n.useEffect)((function(){var r=function(r){var n=null===e||void 0===e?void 0:e.current;n&&!n.contains(r.target)&&t(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[e,t])}},5530:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7294);function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,n.useState)(e),r=t[0],s=t[1],i=(0,n.useCallback)((function(){return s((function(e){return!e}))}),[]);return[r,i,s]}},7914:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(9875),s=r(8739),i=r(4956),a=r(843),o=r(4942),c=r(5861),u=r(885),d=r(7757),l=r.n(d),h=r(7294),p=(0,r(5209).Z)(h.createElement(h.Fragment,null,h.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),h.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"CameraAlt"),f=r(9669),m=r.n(f),v=r(4649),g=r(5530),x=r(9544),w=r(525),y=r(5030),b=r.n(y),j=(r(8864),r(5893));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(e){var t=e.user,r=e.setUser,n=e.stateHandler,s=(0,h.useRef)(null),i=(0,h.useRef)(null),a=(0,h.useRef)(null),o=(0,h.useState)(""),u=o[0],d=o[1],p=(0,h.useState)({unit:"px",aspect:1,x:10,y:10,width:200,height:200}),f=p[0],m=p[1],v=(0,h.useState)(),g=v[0],y=v[1],C=(0,h.useState)(null),D=C[0],N=(C[1],(0,h.useState)(0)),S=N[0],R=N[1];function k(e,t,r,n){var s=document.createElement("canvas"),i=s.getContext("2d"),a=e.naturalWidth/e.width,o=e.naturalHeight/e.height,c=window.devicePixelRatio;return s.width=t.width*c,s.height=t.height*c,null===i||void 0===i||i.setTransform(c,0,0,c,0,0),i&&(i.imageSmoothingQuality="high"),null===i||void 0===i||i.drawImage(e,t.x*a,t.y*o,t.width*a,t.height*o,0,0,t.width,t.height),n?s.toDataURL("image/jpeg"):new Promise((function(e,t){s.toBlob((function(t){t.name=r,t.lastModifiedDate=new Date,e(t)}),"image/jpeg",1)}))}(0,w.Z)(a,n),(0,h.useEffect)((function(){var e=document.createElement("img");e.src=t.avatar;try{var r=function(e){if(!e)return;var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return null===r||void 0===r||r.drawImage(e,0,0),t.toDataURL("image/jpeg")}(e);d(r)}catch(n){console.error(n)}}),[t.avatar]);var P=function(){var e=(0,c.Z)(l().mark((function e(i){var a,o,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(s.current,i,"croppedImage.jpeg",!1);case 2:a=e.sent,o=new File([a],a.name),(c=new XMLHttpRequest).responseType="json",(u=new FormData).append("image",o),c.open("PUT","/api/user/avatar/",!0),c.upload.addEventListener("progress",(function(e){R(e.loaded/e.total*100||0)})),c.addEventListener("readystatechange",(function(e){4==c.readyState&&200==c.status?(r(O(O({},t),{},{avatar:c.response.filePath})),n()):4==c.readyState&&200!=c.status&&console.log(e)})),c.send(u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,h.useCallback)((function(e){s.current=e}),[]);return setTimeout((function(){R(0)}),3e3),(0,j.jsx)("form",{className:"fixed top-0 left-0 z-50 w-screen h-full overflow-auto md:h-screen bg-black/30",onSubmit:function(e){return e.preventDefault()},encType:"multipart/form-data",children:(0,j.jsx)("div",{className:"flex justify-center ",children:(0,j.jsxs)("div",{className:"mt-5 mx-auto md:border border-gray-500 bg-base-100 shadow-md md:rounded-lg p-3   h-full md:h-auto  md:max-w-[80vw] ",ref:a,children:[(0,j.jsxs)("div",{className:"flex justify-between ",children:[(0,j.jsx)("h3",{className:"mr-8 text-lg",children:"Upload your photo ( Maximum 10mb )"}),(0,j.jsx)("button",{className:"p-1",onClick:n,children:(0,j.jsx)(x.Z,{fontSize:"small"})})]}),!u&&(0,j.jsx)("img",{src:t.avatar,alt:"profile picture",className:"w-full max-w-xs mx-auto mt-4 md:max-w-md"}),u&&(0,j.jsx)("div",{className:"flex items-center justify-center w-full mt-4",children:(0,j.jsx)(b(),{src:u,onImageLoaded:_,crop:f,minWidth:100,minHeight:100,keepSelection:!0,ruleOfThirds:!0,onChange:function(e){return m(e)},onComplete:function(e){return y(e)}})}),S>0&&(0,j.jsx)("div",{className:"w-full h-2 mt-1 bg-gray-300 rounded-md",children:(0,j.jsx)("div",{className:"h-2 bg-blue-500 rounded-md",style:{width:"".concat(S,"%")}})}),(0,j.jsxs)("div",{className:"flex justify-center mt-5",children:[(0,j.jsx)("input",{className:"hidden",type:"file",name:"photo",id:"photoInput",ref:i,accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("progress",(function(e){R(e.loaded/e.total*100||0)})),t.addEventListener("load",(function(){d(t.result)})),t.readAsDataURL(e.target.files[0])}}}),(0,j.jsx)("button",{className:"px-3 py-2 my-2 text-sm font-medium text-white bg-blue-500 rounded-lg active:bg-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-400 ",onClick:function(e){return i.current.click()},children:"Upload a photo"}),(0,j.jsx)("button",{type:"button",className:"px-3 py-2 my-2 ml-2 text-sm font-medium text-white bg-blue-500 rounded-lg active:bg-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-400",disabled:!(null!==g&&void 0!==g&&g.width)||!(null!==g&&void 0!==g&&g.height),onClick:function(){return P(g)},children:"Save"}),(0,j.jsx)("small",{className:"block text-red-500 dark:text-red-400",children:D})]})]})})})},N=r(8324);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=e.user,r=e.setUser,n=(0,h.useState)(""),s=n[0],i=n[1],a=(0,g.Z)(),o=(0,u.Z)(a,2),d=o[0],f=o[1],x=(0,v.TA)({initialValues:{username:t.username},validate:function(e){return e.username?{}:{username:"Required"}},onSubmit:function(){var e=(0,c.Z)(l().mark((function e(n,s){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().put("/api/user/",n);case 3:a=e.sent,i(a.data),r(R(R({},t),{},{username:n.username})),setTimeout((function(){return i("")}),3e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s.setErrors({username:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()}),w=function(){var e=(0,c.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().put("/api/user/?removePicture=true");case 3:n=e.sent,r(R(R({},t),{},{avatar:n.data.avatar})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:"w-full p-2 border-gray-300 rounded-lg sm:border sm:mt-2 sm:px-10 sm:py-5 md:py-8",children:[d&&(0,j.jsx)(D,{user:t,setUser:r,stateHandler:f}),(0,j.jsx)("h1",{className:"text-xl",children:"Change info"}),(0,j.jsx)("p",{className:"mt-2 text-sm",children:"Changes will be reflected to every services"}),(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsxs)("div",{className:"relative flex justify-center w-32 h-32 mt-5 mr-5 group",children:[(0,j.jsx)("button",{className:"absolute inset-0 items-center justify-center hidden w-full bg-black rounded-md group-hover:flex bg-opacity-30 active:text-gray-200",onClick:f,children:(0,j.jsx)(p,{})}),(0,j.jsx)("img",{className:"rounded-md",src:t.avatar,alt:"profile picture"})]}),(0,j.jsx)("button",{className:"text-sm uppercase btn btn-link btn-sm ",onClick:f,children:"change photo"})]}),(0,j.jsxs)("form",{className:"mt-2",onSubmit:x.handleSubmit,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(N.Z,{label:"Name",type:"text",className:"input-bordered bg-base-200",id:"username",placeholder:"Enter your username...",value:x.values.username,onChange:x.handleChange("username"),error:x.touched.username&&x.errors.username?x.errors.username:""}),(0,j.jsx)("small",{className:"block mt-2 text-sm text-green-500 text-semibold",children:s})]}),(0,j.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,j.jsx)("button",{className:"!h-10 !min-h-0 px-5 btn btn-primary ",type:"submit",disabled:x.values.username==t.username,children:"Save"}),(0,j.jsx)("button",{className:"!h-10 !min-h-0 text-red-400 bg-transparent border border-red-400 btn-error btn focus:bg-red-400/80 hover:bg-red-400/80 hover:text-base-content focus:text-base-content ",type:"button",onClick:w,disabled:!t.avatar.includes("/api/user/avatar/"),children:"Remove Picture"})]})]})]})}var P=r(1679),_=r(9008),M=r(1664);function E(){var e=(0,P.Z)().user,t=(0,h.useState)(e),r=t[0],o=t[1];return e?(0,j.jsxs)("div",{className:"container p-3 mx-auto md:p-5",children:[(0,j.jsxs)(_.default,{children:[(0,j.jsx)("title",{children:"Auth app | Edit"}),(0,j.jsx)("meta",{httpEquiv:"Content-Security-Policy",content:"default-src *; img-src * 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src  'self' 'unsafe-inline' *"})]}),(0,j.jsx)(a.Z,{user:r||e}),(0,j.jsxs)("div",{className:"flex flex-col max-w-3xl mx-auto mt-8",children:[(0,j.jsx)(M.default,{href:"/profile",passHref:!0,children:(0,j.jsxs)("button",{className:"flex items-center text-base text-blue-400 focus:outline-none",children:[(0,j.jsx)(n.Z,{className:"mr-1"})," Back"]})}),(0,j.jsx)(k,{user:r||e,setUser:o}),(0,j.jsx)(s.Z,{className:"flex mt-2"})]})]}):(0,j.jsx)(i.Z,{})}},7567:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/edit",function(){return r(7914)}])},8864:function(){},5030:function(e,t,r){var n;e.exports=(n=r(7378),(()=>{"use strict";var e={418:e=>{var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,o,c=s(e),u=1;u<arguments.length;u++){for(var d in a=Object(arguments[u]))r.call(a,d)&&(c[d]=a[d]);if(t){o=t(a);for(var l=0;l<o.length;l++)n.call(a,o[l])&&(c[o[l]]=a[o[l]])}}return c}},251:(e,t,r)=>{r(418);var n=r(427),s=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;s=i("react.element"),t.Fragment=i("react.fragment")}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,d=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!c.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:s,type:e,key:u,ref:d,props:i,_owner:a.current}}t.jsx=u,t.jsxs=u},893:(e,t,r)=>{e.exports=r(251)},427:e=>{e.exports=n}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{Component:()=>p,containCrop:()=>l,default:()=>p,makeAspectCrop:()=>c});var e=r(893),t=r(427);function n(e){var t,r,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}const i={x:0,y:0,width:0,height:0,unit:"px"};function a(e,t,r){return Math.min(Math.max(e,t),r)}function o(e){return e&&e.width&&!isNaN(e.width)&&e.height&&!isNaN(e.height)}function c(e,t,r){if(!e.aspect||isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),{...i,...e};const n={unit:"px",x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0,aspect:e.aspect};return e.width&&(n.height=n.width/e.aspect),e.height&&(n.width=n.height*e.aspect),n.y+n.height>r&&(n.height=r-n.y,n.width=n.height*e.aspect),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e.aspect),n}function u(e,t,r){return"%"===e.unit?{...i,...e}:{unit:"%",aspect:e.aspect,x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0}}function d(e,t,r){return e.unit?"px"===e.unit?{...i,...e}:{unit:"px",aspect:e.aspect,x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:{...i,...e,unit:"px"}}function l(e,t,r,n){const s=d(t,r,n),i=d(e,r,n);if(!s.aspect)return s.x<0?(s.x=0,s.width+=s.x):s.x+s.width>r&&(s.width=r-s.x),s.y+s.height>n&&(s.height=n-s.y),s;let a=!1;s.x<0?(s.x=0,s.width+=s.x,s.height=s.width/s.aspect,a=!0):s.x+s.width>r&&(s.width=r-s.x,s.height=s.width/s.aspect,a=!0),a&&i.y>s.y&&(s.y=s.y+(s.height-s.height));let o=!1;return s.y+s.height>n&&(s.height=n-s.y,s.width=s.height*s.aspect,o=!0),o&&i.x>s.x&&(s.x=s.x+(s.width-s.width)),s}const h={capture:!0,passive:!1};class p extends t.PureComponent{constructor(){super(...arguments),this.keysDown=new Set,this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={clientStartX:0,clientStartY:0,cropStartWidth:0,cropStartHeight:0,cropStartX:0,cropStartY:0,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.componentRef=(0,t.createRef)(),this.mediaWrapperRef=(0,t.createRef)(),this.imageRef=(0,t.createRef)(),this.cropSelectRef=(0,t.createRef)(),this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:r}=this.props,{width:n,height:s}=this.mediaDimensions,i=d(t,n,s);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const{ord:a}=e.target.dataset,o="nw"===a||"w"===a||"sw"===a,c="nw"===a||"n"===a||"ne"===a;this.evData={clientStartX:e.clientX,clientStartY:e.clientY,cropStartWidth:i.width,cropStartHeight:i.height,cropStartX:o?i.x+i.width:i.x,cropStartY:c?i.y+i.height:i.y,xDiff:0,yDiff:0,xInversed:o,yInversed:c,xCrossOver:o,yCrossOver:c,lastYCrossover:c,startXCrossOver:o,startYCrossOver:c,isResize:Boolean(a),ord:a||"ne"},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:r,locked:n,keepSelection:s,onChange:i,zoom:a=1,spin:c=0}=this.props,l=this.mediaWrapperRef.current.firstChild;if(e.target!==l||!l.contains(e.target))return;if(r||n||s&&o(t))return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=this.mediaWrapperRef.current.getBoundingClientRect();let p=0,f=0,m=(e.clientX-h.left)/a,v=(e.clientY-h.top)/a,g=c,x=Math.abs(g*Math.PI/180);g>-45&&g<=45||Math.abs(g)>135&&Math.abs(g)<=180?(p=m*Math.cos(x),f=v*Math.cos(x)):g>45&&g<=135?(p=v*Math.sin(x),f=m*Math.sin(x)*-1):g>-135&&g<=-45&&(p=v*Math.sin(x)*-1,f=m*Math.sin(x));const w={unit:"px",aspect:t?t.aspect:void 0,x:p,y:f,width:0,height:0};this.evData={clientStartX:e.clientX,clientStartY:e.clientY,cropStartWidth:w.width,cropStartHeight:w.height,cropStartX:w.x,cropStartY:w.y,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0;const{width:y,height:b}=this.mediaDimensions;i(d(w,y,b),u(w,y,b)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:r,onChange:n,onDragStart:s,zoom:i=1,spin:a=0}=this.props;if(r)return;if(!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,s&&s(e));const{evData:o}=this;let c,l=(e.clientX-o.clientStartX)/i,h=(e.clientY-o.clientStartY)/i,p=a,f=Math.abs(p*Math.PI/180);if(p>-45&&p<=45||Math.abs(p)>135&&Math.abs(p)<=180?(o.xDiff=l*Math.cos(f),o.yDiff=h*Math.cos(f)):p>45&&p<=135?(o.xDiff=h*Math.sin(f),o.yDiff=l*Math.sin(f)*-1):p>-135&&p<=-45&&(o.xDiff=h*Math.sin(f)*-1,o.yDiff=l*Math.sin(f)),c=o.isResize?this.resizeCrop():this.dragCrop(),c!==t){const{width:e,height:t}=this.mediaDimensions;n(d(c,e,t),u(c,e,t))}},this.onComponentKeyDown=e=>{const{crop:t,disabled:r,onChange:n,onComplete:s}=this.props;if(r)return;this.keysDown.add(e.key);let i=!1;if(!o(t))return;const c=this.makeNewCrop(),l=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?p.nudgeStepLarge:e.shiftKey?p.nudgeStepMedium:p.nudgeStep;if(this.keysDown.has("ArrowLeft")&&(c.x-=l,i=!0),this.keysDown.has("ArrowRight")&&(c.x+=l,i=!0),this.keysDown.has("ArrowUp")&&(c.y-=l,i=!0),this.keysDown.has("ArrowDown")&&(c.y+=l,i=!0),i){e.cancelable&&e.preventDefault();const{width:t,height:r}=this.mediaDimensions;c.x=a(c.x,0,t-c.width),c.y=a(c.y,0,r-c.height);const i=d(c,t,r),o=u(c,t,r);n(i,o),s&&s(i,o)}},this.onComponentKeyUp=e=>{this.keysDown.delete(e.key)},this.onDocPointerDone=e=>{const{crop:t,disabled:r,onComplete:n,onDragEnd:s}=this.props;if(this.unbindDocMove(),!r&&this.mouseDownOnCrop){this.mouseDownOnCrop=!1,this.dragStarted=!1;const{width:r,height:i}=this.mediaDimensions;s&&s(e),n&&n(d(t,r,i),u(t,r,i)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}},this.onMediaLoaded=()=>{const{onComplete:e,onChange:t}=this.props,{pixelCrop:r,percentCrop:n}=this.createNewCrop();t(r,n),e&&e(r,n)},this.onImageLoad=e=>{const{onComplete:t,onChange:r,onImageLoaded:n}=this.props;if(!1!==(!n||n(e.currentTarget))){const{pixelCrop:e,percentCrop:n}=this.createNewCrop();r(e,n),t&&t(e,n)}}}componentDidMount(){this.componentRef.current&&this.componentRef.current.addEventListener("medialoaded",this.onMediaLoaded)}componentWillUnmount(){this.componentRef.current&&this.componentRef.current.removeEventListener("medialoaded",this.onMediaLoaded)}componentDidUpdate(e){const{crop:t,onChange:r,onComplete:n}=this.props;if(this.imageRef.current&&t&&e.crop!==t&&t.aspect&&(t.width&&!t.height||!t.width&&t.height)){const{width:e,height:t}=this.imageRef.current,s=c(this.makeNewCrop(),e,t),i=d(s,e,t),a=u(s,e,t);r(i,a),n&&n(i,a)}}bindDocMove(){this.docMoveBound||(document.addEventListener("pointermove",this.onDocPointerMove,h),document.addEventListener("pointerup",this.onDocPointerDone,h),document.addEventListener("pointercancel",this.onDocPointerDone,h),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(document.removeEventListener("pointermove",this.onDocPointerMove,h),document.removeEventListener("pointerup",this.onDocPointerDone,h),document.removeEventListener("pointercancel",this.onDocPointerDone,h),this.docMoveBound=!1)}createNewCrop(){const{width:e,height:t}=this.mediaDimensions,r=(s=e,i=t,!(n=this.makeNewCrop()).aspect||n.width&&n.height?n:c(n,s,i));var n,s,i;return{pixelCrop:d(r,e,t),percentCrop:u(r,e,t)}}get mediaDimensions(){let e=0,t=0;return this.mediaWrapperRef.current&&(e=this.mediaWrapperRef.current.clientWidth,t=this.mediaWrapperRef.current.clientHeight),{width:e,height:t}}getCropStyle(){const e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}getNewSize(){const{crop:e,minWidth:t=0,maxWidth:r,minHeight:n=0,maxHeight:s}=this.props,{evData:i}=this,{width:o,height:c}=this.mediaDimensions;let u,d=i.cropStartWidth+i.xDiff;return i.xCrossOver&&(d=Math.abs(d)),d=a(d,t,r||o),u=e.aspect?d/e.aspect:i.cropStartHeight+i.yDiff,i.yCrossOver&&(u=Math.min(Math.abs(u),i.cropStartY)),u=a(u,n,s||c),e.aspect&&(d=a(u*e.aspect,0,o)),{width:d,height:u}}dragCrop(){const e=this.makeNewCrop(),{evData:t}=this,{width:r,height:n}=this.mediaDimensions;return e.x=a(t.cropStartX+t.xDiff,0,r-e.width),e.y=a(t.cropStartY+t.yDiff,0,n-e.height),e}resizeCrop(){const{evData:e}=this,{crop:t,minWidth:r=0,minHeight:n=0}=this.props,s=this.makeNewCrop(),{ord:i}=e;e.xInversed&&(e.xDiff-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight);const a=this.getNewSize();let o=e.cropStartX,c=e.cropStartY;e.xCrossOver&&(o=s.x+(s.width-a.width)),e.yCrossOver&&(c=!1===e.lastYCrossover?s.y-a.height:s.y+(s.height-a.height));const{width:u,height:d}=this.mediaDimensions,h=l(this.props.crop,{unit:s.unit,x:o,y:c,width:a.width,height:a.height,aspect:s.aspect},u,d);return s.aspect||p.xyOrds.indexOf(i)>-1?(s.x=h.x,s.y=h.y,s.width=h.width,s.height=h.height):p.xOrds.indexOf(i)>-1?(s.x=h.x,s.width=h.width):p.yOrds.indexOf(i)>-1&&(s.y=h.y,s.height=h.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),s.width<r||s.height<n?t:s}getRotatedCursor(e,t){if(t>-135&&t<=-45||t>45&&t<=135)switch(e){case"nw":return{cursor:"ne-resize"};case"n":return{cursor:"w-resize"};case"ne":return{cursor:"nw-resize"};case"e":return{cursor:"s-resize"};case"se":return{cursor:"sw-resize"};case"s":return{cursor:"e-resize"};case"sw":return{cursor:"se-resize"};case"w":return{cursor:"n-resize"}}}createCropSelection(){const{disabled:t,locked:r,renderSelectionAddon:n,ruleOfThirds:s,crop:i,spin:a=0}=this.props,c=this.getCropStyle();return(0,e.jsxs)("div",Object.assign({style:c,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown},{children:[!t&&!r&&(0,e.jsxs)("div",Object.assign({className:"ReactCrop__drag-elements"},{children:[(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",style:this.getRotatedCursor("nw",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",style:this.getRotatedCursor("n",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",style:this.getRotatedCursor("ne",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",style:this.getRotatedCursor("e",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",style:this.getRotatedCursor("se",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",style:this.getRotatedCursor("s",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",style:this.getRotatedCursor("sw",a)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",style:this.getRotatedCursor("w",a)},void 0)]}),void 0),n&&o(i)&&(0,e.jsx)("div",Object.assign({className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation()},{children:n(this.state)}),void 0),s&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-hz"},void 0),(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-vt"},void 0)]},void 0)]}),void 0)}makeNewCrop(e="px"){const t={...i,...this.props.crop||{}},{width:r,height:n}=this.mediaDimensions;return"px"===e?d(t,r,n):u(t,r,n)}crossOverCheck(){const{evData:e}=this,{minWidth:t,minHeight:r}=this.props;!t&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!r&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver)}render(){const{children:t,circularCrop:r,className:s,crossorigin:i,crop:a,disabled:c,imageStyle:u,locked:d,imageAlt:l,onImageError:h,renderComponent:p,scale:f=1,src:m,style:v,rotate:g=0,ruleOfThirds:x}=this.props,{cropIsActive:w,newCropIsBeingDrawn:y}=this.state,b=o(a)&&this.componentRef?this.createCropSelection():null,j=function(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(s&&(s+=" "),s+=t);return s}("ReactCrop",s,{"ReactCrop--active":w,"ReactCrop--disabled":c,"ReactCrop--locked":d,"ReactCrop--new-crop":y,"ReactCrop--fixed-aspect":a&&a.aspect,"ReactCrop--circular-crop":a&&r,"ReactCrop--rule-of-thirds":a&&x,"ReactCrop--invisible-crop":!this.dragStarted&&a&&!a.width&&!a.height});return(0,e.jsxs)("div",Object.assign({ref:this.componentRef,className:j,style:v,onPointerDown:this.onComponentPointerDown,tabIndex:0,onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp},{children:[(0,e.jsx)("div",Object.assign({ref:this.mediaWrapperRef,style:{transform:`scale(${f}) rotate(${g}deg)`}},{children:p||(0,e.jsx)("img",{ref:this.imageRef,crossOrigin:i,className:"ReactCrop__image",style:u,src:m,onLoad:this.onImageLoad,onError:h,alt:l},void 0)}),void 0),t,b]}),void 0)}}p.xOrds=["e","w"],p.yOrds=["n","s"],p.xyOrds=["nw","ne","se","sw"],p.nudgeStep=1,p.nudgeStepMedium=10,p.nudgeStepLarge=100})(),s})())}},function(e){e.O(0,[774,914,115,888,179],(function(){return t=7567,e(e.s=t);var t}));var t=e.O();_N_E=t}]);